<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:c="sap.ui.core"
>
    <Table
        id="idPersonalFormListSetTable"
        items="{
            path: 'jsonModel>/PersonalFormListSet'
        }"
        fixedLayout="false"
        growing="true"
        growingThreshold="15"
        growingScrollToLoad="true"
    >
        <headerToolbar>
            <Toolbar class="sapUiTinyMarginTop">
                <Title text="Talep Listem" />
                <ToolbarSpacer />
                <SearchField
                fieldGroupIds="searchField"
                    showRefreshButton="false"
                    enableSuggestions="true"
                    tooltip="{i18n>listSearchTooltip}"
                    search="_onSearchcidMyPYPListTableAll($event, 'idPersonalFormListSetTable', '0')"
                    width="auto"
                >
                    <SuggestionItem
                        key="{jsonModel>Guid}"
                        text="{jsonModel>Guid}"
                    />
                </SearchField>
                <Button
                    press="refreshTransferedTable($event, 'idPersonalFormListSetTable')"
                    icon="sap-icon://refresh"
                    type="Emphasized"
                />
                <Button
                    id="sortButton"
                    press=".onOpenViewSettings"
                    icon="sap-icon://sort"
                    type="Transparent"
                />
            </Toolbar>
        </headerToolbar>
        <columns>
            <Column>
                <Text text="Talep No" />
            </Column>
            <Column>
                <Text text="Talep Edilen Pozisyon" />
            </Column>
            <Column>
                <Text text="Talep Edilen Çalışan Sayısı" />
            </Column>
            <Column>
                <Text text="Çalışacağı Lokasyon" />
            </Column>
            <Column>
                <Text text="Onay Durumu" />
            </Column>
            <Column>
                <Text text="" />
            </Column>
        </columns>
        <items>
            <ColumnListItem>
                <ObjectIdentifier text="{
                    path: 'jsonModel>Guid'
                }" />
                <!-- <ObjectIdentifier text="{
                    path: 'jsonModel>Guid',
                    formatter: '.formatter.removeDatsFromString'
                }" /> -->
                <ObjectIdentifier text="{= ${jsonModel>Tplanstext} === '' ? ${jsonModel>Pozisy} : ${jsonModel>Tplanstext} }" />
                <ObjectIdentifier text="{
                    path: 'jsonModel>Tcsayi',
                    type: 'sap.ui.model.odata.type.String',
                    constraints: {
                        isDigitSequence: true,
                        maxLength: 10
                    }
                }" />
                <ObjectIdentifier text="{jsonModel>Btext}" />
                <ObjectStatus
                    text="{
                        path: 'jsonModel>Statu',
                        formatter: '.formatter.setStatusText'
                    }"
                    icon="{
                        path: 'jsonModel>Statu',
                        formatter: '.formatter.setStatusIcon'
                    }"
                    state="{
                        path: 'jsonModel>Statu',
                        formatter: '.formatter.setStatusState'
                    }"
                />
                <FlexBox>
                    <Button
                        visible="{= ${jsonModel>Statu} !== '05'  }"
                        icon="sap-icon://show"
                        press="navigateToShowDetail"
                    />
                    <Button
                        visible="{= ${jsonModel>Statu} === '05' }"
                        icon="sap-icon://edit"
                        press="onEditDraftButton"
                    />
                </FlexBox>
                <!-- <ObjectIdentifier text="{= ${Statu} === '01' ? 'Onayda' : ''}" /> -->
            </ColumnListItem>
        </items>
    </Table>
</c:FragmentDefinition>